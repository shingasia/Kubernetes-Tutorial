<!-- github-markdown-css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-dark.css" />
<style type='text/css'>
    .markdown-body {
		box-sizing: border-box;
		/* min-width: 200px;
		max-width: 980px; */
		margin: 0 auto;
		padding: 45px;
	}
	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
    .subject1 {
        font-size : 30px;
    }
    .subject2 {
        font-size : 27px;
        color : #80bfff;
    }
    .subtitle {
        font-size : 20px;
    }
    #summary li{
        background-color : #ffffcc;
        font-size : 18px;
        font-weight : 700;
        color : #6600cc;
    }
    .namespace-list {
        font-size : 18px;
        color : white;
    }
    .keyword-block {
        width : 200px;
        background-color : #e600ac;
    }
</style>
<div class="markdown-body">
<hr/>
    <p class="subject1">네임스페이스</p>
<hr/>
<div id="summary">
    <ul>
        <li><span>쿠버네티스에서, 네임스페이스 는 단일 클러스터 내에서의 리소스 그룹 격리 메커니즘을 제공</span></li>
        <li><span>리소스의 이름은 네임스페이스 내에서 유일해야 하며, 네임스페이스 간에서 유일할 필요는 없다.</span></li>
        <li><span>리소스 이름과 네임스페이스의 조합을 사용하여 각 리소스는 클러스터 전체에서 고유한 ID를 얻는다.</span></li>
        <li><span>네임스페이스 기반 스코핑은 네임스페이스 기반 오브젝트 (예: 디플로이먼트, 서비스 등) 에만 적용 가능하며 클러스터 범위의 오브젝트 (예: 스토리지클래스, 노드, 퍼시스턴트볼륨 등) 에는 적용 불가능하다.</span></li>
    </ul>
</div>

<img src="./images/쿠버네티스-네임스페이스1.png" alt="쿠버네티스 구성 요소">
<img src="./images/쿠버네티스-네임스페이스2.png" alt="쿠버네티스 구성 요소">
<hr/>
<dl>
    <dt><p class="subject2">네임스페이스 다루기<p></dt>
    <dd><p class="subtitle">네임스페이스 조회</p></dd>
    <dd>사용 중인 클러스터의 현재 네임스페이스를 나열</dd>
    <dd><span style="color:#ff0066; font-size:18px">$ kubectl get namespaces</span></dd>
    <dd>
        <ul>
            쿠버네티스는 처음에 네 개의 초기 네임스페이스를 갖는다.
            <li><span class="namespace-list keyword-block">default</span>
            기본적으로 Kubernetes 클러스터에서 생성된 모든 리소스는 default 네임스페이스에 생성된다.
            </li>
            <li><span class="namespace-list keyword-block">kube-system</span>
            쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스
            </li>
            <li><span class="namespace-list keyword-block">kube-public</span>
            이 네임스페이스는 자동으로 생성되며 모든 사용자(인증되지 않은 사용자 포함)가 읽기 권한으로 접근할 수 있다.<br/>
            이 네임스페이스는 주로 전체 클러스터 중에 공개적으로 드러나서 읽을 수 있는 리소스를 위해 예약되어 있다.
            </li>
            <li><span class="namespace-list keyword-block">kube-node-lease</span>
            이 네임스페이스는 각 노드와 연관된 리스(Lease) 오브젝트를 갖는다.<br/>
            리스(Lease)는 kubelet이 하트비트를 보내서 컨트롤 플레인이 노드의 장애를 탐지할 수 있게 한다.
            </li>
        </ul>
    </dd>
    <hr/>
    <dt><p class="subject2">네임스페이스와 DNS</p></dt>
    <dd><span style="color : #cc0000">서비스(파드 집합에서 실행중인 애플리케이션을 네트워크 서비스로 노출하는 추상화 방법, 쿠버네티스는 파드에게 고유한 IP 주소와 파드 집합에 대한 단일 DNS 명을 부여하고, 그것들 간에 로드-밸런스를 수행할 수 있다.)</span><span>를 생성하면 해당 DNS 엔트리가 생성된다.</span></dd>
    <dd><span>이 엔트리는 <div style="color : blue; display : inline"><서비스-이름>.<네임스페이스-이름>.svc.cluster.local</div>의 형식을 갖는데, 이는 컨테이너가 <서비스-이름>만 사용하는 경우, 네임스페이스 내에 국한된 서비스로 연결된다. (개발, 스테이징, 운영과 같이 여러 네임스페이스 내에서 동일한 설정을 사용하는 경우에 유용)</span></dd>
    <dd><span>네임스페이스를 넘어서 접근하기 위해서는, 전체 주소 도메인 이름(FQDN : Fully Qualified Domain Name)을 사용해야 한다.</span></dd>
    <dd><span>그렇기 때문에, 모든 네임스페이스 이름은 유효한 RFC 1123 DNS 레이블이어야 한다.</span></dd>
    <hr/>
    <dt><p class="subject2">모든 오브젝트가 네임스페이스에 속하지는 않음</p></dt>
    <dd>대부분의 쿠버네티스 리소스(예를 들어, 파드, 서비스, 레플리케이션 컨트롤러 외)는 네임스페이스에 속한다.</dd>
    <dd>하지만 네임스페이스 리소스 자체는 네임스페이스에 속하지 않는다. 그리고 노드나 퍼시스턴트 볼륨과 같은 저수준 리소스는 어느 네임스페이스에도 속하지 않는다.</dd>
    <br/>
    <dd>
        <span style="color:#008800"># 네임스페이스에 속하는 리소스</span><br/>
        kubectl api-resources --namespaced=<span style="color: #aa22ff">true</span>
        <br/>
        <span style="color:#008800"># 네임스페이스에 속하지 않는 리소스</span><br/>
        kubectl api-resources --namespaced=<span style="color: #aa22ff">false</span>
    </dd>
</dl>
</div>


